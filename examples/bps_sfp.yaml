includeConfigs:
  - ${GEN3_WORKFLOW_DIR}/examples/bps_drp_baseline.yaml
  - ${GEN3_WORKFLOW_DIR}/examples/bps_DC2-3828-y1_resources.yaml

pipelineYaml: "${GEN3_WORKFLOW_DIR}/pipelines/DRP.yaml#isr,characterizeImage,calibrate"

payload:
  inCollection: LSSTCam-imSim/defaults
  payloadName: sfp_DC2
  butlerConfig: ${PWD}/gen3-3828-y1
  dataQuery: "skymap='DC2' and tract=3828"

executionButler:
  whenCreate: "PREPARE"
  createCommand: "${CTRL_MPEXEC_DIR}/bin/pipetask qgraph -b {butlerConfig} --input {inCollection} --output-run {outColl
ection} --save-execution-butler {executionButlerDir} -g {qgraphFile}"
  whenMerge: "ALWAYS"
  implementation: JOB  # JOB, WORKFLOW
  concurrency_limit: db_limit
  command1: "${DAF_BUTLER_DIR}/bin/butler --log-level=VERBOSE transfer-datasets  {executionButlerDir} {butlerConfig} --
collections {outCollection}"
  command2: "${DAF_BUTLER_DIR}/bin/butler collection-chain {butlerConfig} {output} {outCollection} --mode=prepend"

parsl_config:
  retries: 1
  executor: ThreadPool
  max_threads: 4
  monitoring: true
#  executor: WorkQueue
#  provider: Local
#  monitoring: false
#  worker_options: "--memory=12000"
